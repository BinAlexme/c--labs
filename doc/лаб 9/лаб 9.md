# **ЛАБОРАТОРНАЯ РАБОТА №9**
**“Вывод текста с использованием различных шрифтов."**
###
### **Задание**

1. `	`Дополнить меню редактора и  кнопочную панель управления  командами выбора шрифта по умолчанию и выбора режима ввода текстовых надписей.  Команда выбора шрифта должна вызывать стандартное диалоговое окно выбора шрифта. 
1. В режиме  ввода текста левой кнопкой мыши должны  задаваться размеры и положение блока ввода текста.  Ввод текста должен  завершаться нажатием клавиши «Enter», после чего введенная текстовая надпись  должна отображаться как элемент рисунка. При выводе должен использоваться текущий цвет пера как цвет выводимого текста. 

3	Текстовые надписи  должны сохраняться в файле вместе с графическими элементами рисунка.

4        В строке состояния  в режиме ввода текста должны отображаться в качестве дополнительных параметров название шрифта и его размер.

### **Краткая справка**

**Диалоговая панель выбора шрифта**

Класс FontDialog реализует диалоговую панель выбора шрифта, которая позволяет пользователю выбрать начертание (семейство) и параметры шрифта. Свойство Font этого класса в случае закрытия диалога по кнопке «OK» содержит ссылку на экземпляр класса Font. Экземпляр класса Font  передаётся методу DrawString класса Graphics для задания шрифта, которым выводится в окно  текстовая надпись.

**Управляющий элемент  ввода-вывода текста**

Класс TextBox реализует управляющий элемент, являющийся однострочным или многострочным полем ввода текста. Этот класс обеспечивает базовые функциональные возможности по работе с текстом в текстовом окне, такие как выбор текста, вырезание и вставка текста, а также широкий спектр событий.  Для временного использования этого элемента  в окне следует создать  экземпляр этого класса, настроить его параметры,  и затем указать в качестве владельца элемента  экземпляр формы, в которой должен отображаться элемент. 

Свойства управляющего элемента  TextBox

|**Имя**|**Режим доступа**|**Описание**|
| :- | :- | :- |
|CausesValidation|Чтение/запись|<p>Когда элемент, у которого данному свойству присвоено значение true, должен оказаться в фокусе, то генерируются два события — validating и validated. Их можно обработать с целью проверки допустимости данных,</p><p>введенных в управляющий элемент, который выходит из фокуса. </p>|
|CharacterCasing|Чтение/запись|<p>Позволяет определить, производится лн изменение регистра вводимых символов. Это свойство может иметь одно из трех значений:</p><p>•   Lower — весь вводимый в окно текст переводится</p><p>в нижний регистр,</p><p>•   Normal — текст остается без изменений.</p><p>•   Upper — весь вводимый в окно текст переводится в верхний регистр.</p>|
|MaxLength|Чтение/запись|Значение, которое определяет максимальную длину текста в Textbox, выраженную в символах. Если длина ограничена только объемом имеющейся в наличии памяти, данному свойству следует присвоить значение, равное нулю.|
|Multiline|Чтение/запись|Указывает, допускает лн данный управляющий элемент наличие нескольких строк. Многострочный элемент позволяет одновременный вывод нескольких строк текста.|
|PasswordChar|Чтение/запись|Указывает, что текст, находящийся в однострочном окне, должен заменяться на "секретные" символы.  Если свойство Multiline имеет значение, равное true, то это свойство игнорируется.|
|ReadOnly|Чтение/запись|Логическое значение, указывающее на то, что текст может использоваться в режиме "только чтение".|
|ScrollBars|Чтение/запись|Позволяет указать, что состоящее из нескольких строк окно должно выводиться с линейками прокрутки|
|SelectedText|Чтение/запнсь|Определяет выбранный в окне текст.|
|SelectionLength|Чтение/запнсь|Определяет число символов в выбранном тексте. Если присвоенное этому свойству значение превышает количество символов в тексте, оно будет изменено на разность между количеством символов в тексте и значением свойства SelectionStart|
|SelectionStart|Чтение/запись|Определяет начало выделенного текста в текстовом окне.|
|WordWrap|Чтение/запись|Определяет, необходимо ли в многострочном окне автоматически переносить слова в том случае, если длина строки превышает ширину управляющего элемента.|

События управляющего элемента  TextBox

|**Имя**|**Описание**|
| :- | :- |
|<p>Enter</p><p>GotFocus</p><p>Leave</p><p>Validating</p><p>Validated</p><p>LostFocus</p>|Первые шесть событий, приведенных в таблице? наступают в той последовательности, в которой они перечислены. Они известны под названием "событий, связанных с фокусом" и генерируются при любом изменении фокуса управляющего элемента за исключением двух случаев. События Validating и Validated происходят только в том случае, если свойство CausesValidation имеет значение true.|
|<p>Key Down</p><p>KeyPress</p><p>KeyUp</p>|<p>Следующие три события  - события, связанные с клавишами.</p><p>Оин позволяют отслеживать н изменять то, что в вводится в управляющий элемент. События keyDown и kеуUр получают код, соответствующий нажатой клавише, Это позволяет определять нажатие специальных клавиш, например, Shift или Ctrl вместе с F1. </p><p>Keypress позволяет получать символ, соответствующий нажатой клавише.</p><p>Это означает, что символ  "a" отличен от символа "А". Это событие оказывается полезным, если требуется задать множество допустимых символов, например, разрешить ввод только численных значений.</p>|
|Change|Наступает при любых изменениях текста в текстовом окне независимо от их характера.|


***Рекомендации***

Пункт 1. 

Следует добавить к классу основной формы поле для хранения выбранного шрифта и задать  по умолчанию для него шрифт Times New Roman размера 12. К меню программы и кнопочной панели добавить пункты выбора шрифта и связать их с общим обработчиком, который должен изменять поле, хранящее значение выбранного шрифта.

Пункт 2.

К набору классов фигур следует добавить класс, хранящий и обрабатывающий текстовую надпись. Операцию ввода контура текстового блока можно реализовать по аналогии с классом прямоугольника. Но после отпускания левой кнопки мыши для  класса текстовой надписи вместо отображения прямоугольника должен создаваться элемент управления TextBox, в который должен вводится текст. Ввод текста завершается нажатием клавиши «Enter». После этого элемент управления должен скрываться, а введенная  надпись должна отображаться методом Draw класса текстовой надписи. 

Для созданного элемента TextBox следует задать свойства Parent (ссылка на форму рисунка), Location, Size, Multiline (true), Font, ForeColor. Цвет текста должен соответствовать выбранному в редакторе цвету пера. Следует назначить   операцией += обработчик события KeyDown. В методе-обработчике данного события следует проверять код клавиши (свойство KeyCode события KeyEventArgs) и если встретится код клавиши Enter (Keys.Enter), то следует скрывать элемент управления, а его текст переносить в соответствующий объект текстовой надписи.

Пункт 3.

Для сохранения текстовых надписей в файлах достаточно указать для класса  текстовой надписи атрибут сериализации.



Пункт 4.

Потребуется дополнить строку состояния двумя панелями, информация в которых должна отображаться только в режиме ввода текстовых надписей.
