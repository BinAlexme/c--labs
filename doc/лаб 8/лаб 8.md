# **ЛАБОРАТОРНАЯ РАБОТА №8**
**“Строка состояния. Панель инструментов."**

### **Задание**

1. Добавить в редактор строку состояния. Реализовать вывод в строке  состояния информации о выбранном размере пера, цвете пера и цвете заливки, а также вывод координат курсора мыши  и размера рисунка в пикселях. 

1. Спроектировать кнопочную панель, содержащую кнопки создания  нового документа, сохранения документа, открытия документа,  выбора размера пера, цвета пера, цвета заливки фона, размера вновь создаваемого изображения и группу кнопок выбора режима рисования фигуры – прямоугольника, эллипса, прямой линии, линии произвольной формы.  Группа должна быть реализована как группа кнопок с зависимой фиксацией. Также разместить на панели независимую кнопку включения /выключения заливки.  Обеспечить обработку событий от кнопок панели.

### **Краткая справка**

В пользовательском интерфейсе приложений Windows панели инструментов и строки состояния по значимости следуют сразу за меню и диалоговыми окнами. Панель инструментов обычно состоит из графических кнопок, часто дублирующих команды меню. Строка состояния сообщает пользователю некоторую информацию в текстовом виде.  Обычно панель инструментов помещается вверху, а строка состояния — внизу клиентской области. И панель инструментов, и строка состояния объединяют в себе более мелкие элементы. Первая состоит из множества элементов типа ToolStripButton, вторая обычно содержит несколько панелей, являющихся экземплярами класса StatusBarPanel.  

**Управляющий элемент StatusBar**

Управляющий элемент StatusBar (строка состояния) обычно используется для  предоставления дополнительных данных о выбранном элементе или информации о действии, выполняемом в настоящий момент. 

Свойства управляющего элемента StatusBar

Существует возможность присвоить свойству Text управляющего элемента statusBar некоторый текст, который будет выведен пользователю; кроме этого можно создавать панели и использовать их для тех же целей.



|**Имя**|**Режим доступа**|<p>**Описание**</p><p></p>|
| - | - | - |
|<p>BackGroundlmage</p><p></p>|Чтение/запись|<p>К линейке состояния можно привязать какой-либо рисунок,</p><p>который будет выводиться на заднем плане.</p><p></p>|
|<p>Panels</p><p></p>|Только чтение|<p>Представляет собой семейство панелей, из которых состоит</p><p>линейка состояния. Это семейство используется для</p><p>добавления и удаления панелей.</p><p></p>|
|ShowPanels|Чтение/запись|<p>Этому свойству должно быть присвоено значение true</p><p>в том случае, если будут выводиться панели.</p>|
|<p>Text</p><p></p>|Чтение/запись|<p>В том случае, если панели не используются, в этом свойстве</p><p>содержится текст, который выводится в линейке состояния.</p>|


Каждая панель в линейке состояния представляет собой экземпляр класса

StatusBarPanel.

**Управляющий элемент ToolStrip**

Реализуемая этим элементом кнопочная панель инструментов обычно обеспечивает альтернативный способ  активизации соответствующих пунктов меню. При щелчке пользователя на кнопке  «Сохранить», результат будет тем же, что и при выборе команды «Файл»-> «Сохранить» из меню. 

Элемент ToolStrip может содержать ряд  разных элементов панели инструментов: 

• ToolStripButton 

• ToolStripLabel 

• ToolStripSplitButton 

• ToolStripDropDownButton 

• ToolStripSeparator 

• ToolStripComboBox 

• ToolStripTextBox 

• ToolStripProgressBar 

При размещении кнопок на ToolStrip разработчик может** использовать графические изображения стандартных кнопок (например, «New», «Save») из стандартной библиотеки Microsoft, которая находится в папке  \Program Files\Microsoft Visual Studio 8\Common7\VS2005ImageLibrary\Bitmaps\Commands\

Изображение назначается кнопке командой контекстного меню «Set Image»-> «Import».

Для создания кнопок собственного дизайна следует добавлять к проекту графическое изображение «Project»-> «Add New Item»-> «Icon File». Затем командой меню «Image» -> «New Image Type» следует задать тип изображения «16x16 256 color» и редактировать его, используя встроенный редактор Visual Studio. Исходный тёмно-зелёный фон изображений пиктограмм  при их использовании становится прозрачным. Его следует сохранять в качестве фона создаваемого рисунка кнопки. После создания кнопок с их событием «Click» связываются обработчики событий.


***Рекомендации***

*Пункт 1.*

Чтобы добавить statusBar  в основную форму проекта сначала следует в панели Toolbox в контекстном меню, вызываемом по правой кнопке мыши, выбрать команду «Choose Items»  и в появившемся списке выбрать флажок напротив всех упоминаний класса StatusBar. После этого данный элемент появится  в панели инструментов и его можно будет добавить в форму. Затем найдите свойство Panels и  щелкните мышью на кнопке, расположенной справа от него, для перехода в диалог, который позволяет добавлять панели. Щелкните мышью на Add — в набор  будет добавлена

новая панель. Для каждой из добавляемых панелей настройте свойства – размер, имя, текст по умолчанию. Для панелей, в которых будет отображаться цвет, следует выбрать стиль «OwnerDraw». Присвойте свойству showPanels элемента statusBar значение true. Добавьте к классу формы обработчик события  DrawItem (это событие элемента statusBar). Данный обработчик должен выводить  информацию в панели элемента statusBar. При этом для панелей, отображающих цвет пера и фона, следует реализовать рисование на поверхности панели прямоугольников соответствующего цвета. Для этого потребуется создать объект Graphics для объекта statusBar и передавать ему для рисования прямоугольника координаты, учитывающие положение панели на строке состояния. При изменении соответствующих настроек в редакторе должна изменяться и информация в строке состояния. Информация о размере рисунка должна изменяться при переключении между окнами с различным размером. Для этого можно обрабатывать событие формы рисунка Activated.

*Пункт 2.*

Добавьте на главную форму проекта с панели Toolbox элемент ToolStrip. Создайте несколько групп кнопок в соответствии с их назначением, разделяя группы элементом «Separator». Новые кнопки добавляются к ToolStrip щелчком по находящейся на этом элементе кнопке «Add ToolStripButton». Задайте кнопкам файловых операций стандартные изображения. Для  кнопок, соответствующих операциям графического редактора,  создайте собственные изображения.  Назначьте кнопкам те же обработчики команд, которые уже используются с пунктами меню. Для кнопки заливки следует реализовать фиксацию в нажатом состоянии. Для этого надо управлять её свойством «Checked». Для кнопок, задающих тип фигуры, должна быть реализована зависимая фиксация, что потребует соответствующей модификации обработчиков команд. 

